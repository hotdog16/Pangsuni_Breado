{% extends 'layout.html' %} {% block body %}
<style>
  #header .top-category {
    display: none;
  }

  #header .logo {
    margin: 0 auto;
    margin-top: 50px;
  }

  #header .logo a {
    font-size: 30px;
  }

  #nav {
    display: none;
  }
</style>
<div id="login">
  <h2>로그인</h2>
  <form method="post">
    <div class="login-input">
      <label>아이디</label>
      <input class="id-input" name="u_id" placeholder="아이디를 입력하세요." />
    </div>
    <div class="login-input">
      <label>비밀번호</label>
      <input type="password" name="u_pwd" class="pass_input" placeholder="비밀번호를 입력하세요." />
    </div>
    <div class="login-text"></div>
    <button type="submit" class="btn login-btn">LOGIN</button>
  </form>
  <p>아직 회원이 아니세요?</p>

  <button id="join" type="sumit" class="btn join-btn" onclick="location.href='/join'">회원가입 하러가기</button>

  <p>아이디,비밀번호를 잊으셨나요?</p>
  <button id="forget" type="sumit" class="btn forget-btn">아이디/비밀번호 찾기</button>
</div>

<script>
  $(document).ready(function () {
    $(".login-btn").on("click", function () {
      const id = $(".id-input").val();
      const pass = $(".pass_input").val();

      axios({
        url: "/login", // 통신할 웹문서
        method: "post", // 통신할 방식
        data: {
          // 인자로 보낼 데이터
          pass: pass,
          id: id,
        },
        responseType: "json",
        responseEncoding: "utf-8",
      })
        .then((res) => {
          console.log("axios1->", res);
          console.log("axios2->", res.data.msg);
          console.log("axios3->", res.status);
          console.log("axios3->", res.data.msg);
          if (res.status === "200") {
          }
        })
        .catch((error) => {
          console.log("axios1ec->", error);
          console.log("axios1ec->", error.code);
          if (res.data.msg === "로그인에러") {
            $(".login-text").text(`아이디나 비밀번호가 잘못입력되었습니다.`);
            $(".login-text").css("color", "red");
          }
        });
    });
  });
</script>

{% endblock %}
