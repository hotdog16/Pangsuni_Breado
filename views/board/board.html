{% extends 'layout.html' %}
{% block style %}


{% endblock %}
{% block body %}
<div id="qna-border">
    <h1>QNA:묻고답하기</h1>
    <p>빵수니 브래두를 찾아주셔서 감사합니다.<br>
        이용중 궁금한 사항을 문의주시면 친절한 답변을 드립니다.</p>
    <!--    <h1>list {{str}}</h1>-->
    <!--<form id ="board_form" action="/board" method="post">-->
    <div class="qna-list">
        <ul class="qna-title">
            <li>No</li>
            <li>작성자ID</li>
            <li>제목</li>
            <li>내용</li>
            <li>등록일</li>
            <li>조회수</li>
        </ul>
        {% for i in list %}
        <div class="qna-con">
            <ul class="qna-list-con">
                <li>{{i.b_no}}</li>
                <li>{{i.u_id}}</li>
                <li>{{i.b_title}}</li>
                <li>{{i.b_content}}</li>
                <li>{{i.b_reg_dt}}</li>
                <li>{{i.b_cnt}}</li>
            </ul>
            <div class="qnabox">
               {{i.b_content}}
            </div>
        </div>

        {% endfor %}

    </div>
</div>
<button><a href="/board/write">글쓰기</a></button>

<!--2023.04.23-메뉴 펼치고 접기-->
<!--<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>-->
<script>
    let qnaConBox = document.querySelectorAll('.qna-list-con');
    qnaConBox.forEach((target) => {
        target.addEventListener('click', function (){
            let flag = this.parentNode.lastElementChild.style.display;
            if (flag === 'black') {
                this.parentNode.lastElementChild.style.display = 'none';
            } else {
                this.parentNode.lastElementChild.style.display = 'black';
            }
        })
    })
    // let qnaList = document.querySelector('.qna-list-con');
    // let qnaListBox = document.querySelector('.qnabox');
    // // 클릭시 메뉴 펼침 or 닫힘
    // qnaList.addEventListener('click', () => {
    //     if (qnaListBox.style.display = 'none') {
    //         alert('fff');
    //         qnaListBox.classList.add('test');
    //     } else {
    //         qnaListBox.classList.remove('test');
    //     }
    // })

    // $('.qna-list-con').click(function() {
    //     $(this).find('.qnabox').slideToggle()
    // });	// <![CDATA[  <-- For SVG support
    // if ('WebSocket' in window) {
    //     (function () {
    //         function refreshCSS() {
    //             var sheets = [].slice.call(document.getElementsByTagName("link"));
    //             var head = document.getElementsByTagName("head")[0];
    //             for (var i = 0; i < sheets.length; ++i) {
    //                 var elem = sheets[i];
    //                 var parent = elem.parentElement || head;
    //                 parent.removeChild(elem);
    //                 var rel = elem.rel;
    //                 if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
    //                     var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
    //                     elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
    //                 }
    //                 parent.appendChild(elem);
    //             }
    //         }
    //         var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
    //         var address = protocol + window.location.host + window.location.pathname + '/ws';
    //         var socket = new WebSocket(address);
    //         socket.onmessage = function (msg) {
    //             if (msg.data == 'reload') window.location.reload();
    //             else if (msg.data == 'refreshcss') refreshCSS();
    //         };
    //         if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
    //             console.log('Live reload enabled.');
    //             sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
    //         }
    //     })();
    // }
    // else {
    //     console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
    // }
    // ]]>

    let btn = document.querySelectorAll('.qna-list-con');

    btn.forEach((target)=>{
        target.addEventListener('click', function () {
            let flag = this.parentNode.lastElementChild.style.display;
            if(flag === 'block'){
                this.parentNode.lastElementChild.style.display = 'none';
            }else{
                this.parentNode.lastElementChild.style.display = 'block';
            }
        })
    })
</script>

{% endblock %}